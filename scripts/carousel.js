// Generated by CoffeeScript 1.3.3
(function() {

  $(function() {
    var carousel, displayImage, interval, isRunning, numItems, startCarousel, timerId;
    carousel = this;
    carousel.selectedItem = 0;
    isRunning = false;
    timerId = 0;
    interval = 5000;
    numItems = $(".item").length;
    $("#onOff").click(function() {
      if (isRunning === false) {
        carousel.selectedItem += 1;
        if (carousel.selectedItem === numItems) {
          carousel.selectedItem = 0;
        }
        displayImage(carousel.selectedItem);
        timerId = startCarousel(interval, carousel.selectedItem, numItems);
        return isRunning = true;
      } else {
        clearInterval(timerId);
        return isRunning = false;
      }
    });
    $("#next").click(function() {
      carousel.selectedItem += 1;
      if (carousel.selectedItem === numItems) {
        carousel.selectedItem = 0;
      }
      return displayImage(carousel.selectedItem);
    });
    $("#previous").click(function() {
      carousel.selectedItem -= 1;
      if (carousel.selectedItem === 0) {
        carousel.selectedItem = numItems - 1;
      }
      return displayImage(carousel.selectedItem);
    });
    $("#pop").click(function() {
      var docHeight, docWidth, item, popHeight, popWidth;
      $("#popBackground").css({
        "opacity": "0.7",
        "display": "block"
      });
      $("#popBackground").fadeIn("slow");
      docHeight = document.documentElement.clientHeight;
      popHeight = $("#popUp").height();
      docWidth = document.documentElement.clientWidth;
      popWidth = $("#popUp").width();
      item = $(".selected > img");
      $("#popUp").css({
        "display": "block",
        "top": docHeight / 2 - popHeight / 2,
        "left": docWidth / 2 - popWidth / 2
      });
      $("#popUp").fadeIn("slow");
      return $("#popContent").append(item);
    });
    $("#popClose").click(function() {
      $("#popBackground").css({
        "display": "display",
        "none": "none"
      });
      return $("#popUp").css({
        "display": "display",
        "none": "none"
      });
    });
    startCarousel = function(interval, selectedItem, numItems) {
      return setInterval((function() {
        selectedItem += 1;
        if (selectedItem === numItems) {
          selectedItem = 0;
        }
        carousel.selectedItem = selectedItem;
        return displayImage(selectedItem);
      }), interval);
    };
    return displayImage = function(selectedItem) {
      $(".selected").removeClass("selected");
      return $("#carousel .item:eq(" + selectedItem + ")").addClass("selected");
    };
  });

}).call(this);
