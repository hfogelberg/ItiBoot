// Generated by CoffeeScript 1.3.3
(function() {

  $(function() {
    var carousel, displayImage, displayPopImage, interval, isRunning, numItems, startCarousel, startPopCarousel, timerId;
    carousel = this;
    carousel.selectedItem = 0;
    carousel.popItem = 0;
    isRunning = false;
    timerId = 0;
    interval = 5000;
    numItems = $(".item").length;
    $(".tools #onOff").click(function() {
      if (isRunning === false) {
        carousel.selectedItem += 1;
        if (carousel.selectedItem === numItems) {
          carousel.selectedItem = 0;
        }
        displayImage(carousel.selectedItem);
        timerId = startCarousel(interval, carousel.selectedItem, numItems);
        return isRunning = true;
      } else {
        clearInterval(timerId);
        return isRunning = false;
      }
    });
    $(".tools #next").click(function() {
      carousel.selectedItem += 1;
      if (carousel.selectedItem === numItems) {
        carousel.selectedItem = 0;
      }
      return displayImage(carousel.selectedItem);
    });
    $("tools #previous").click(function() {
      carousel.selectedItem -= 1;
      if (carousel.selectedItem === 0) {
        carousel.selectedItem = numItems - 1;
      }
      return displayImage(carousel.selectedItem);
    });
    $(".tools #pop").click(function() {
      clearInterval(timerId);
      isRunning = false;
      carousel.popItem = carousel.selectedItem;
      $(".selected").addClass('popImage');
      return displayPopImage();
    });
    $(".popTools #next").click(function() {
      carousel.popItem += 1;
      if (carousel.popItem === numItems) {
        carousel.popItem = 0;
      }
      return displayPopImage();
    });
    $(".popTools #previous").click(function() {
      carousel.popItem -= 1;
      if (carousel.popItem === 0) {
        carousel.popItem = numItems - 1;
      }
      return displayPopImage();
    });
    $(".popTools #onOff").click(function() {
      if (isRunning === false) {
        carousel.popItem += 1;
        if (carousel.popItem === numItems) {
          carousel.popItem = 0;
        }
        timerId = startPopCarousel(interval, numItems);
        return isRunning = true;
      } else {
        clearInterval(timerId);
        return isRunning = false;
      }
    });
    $("#popClose").click(function() {
      $("#popContent").empty();
      $("#popBackground").css({
        "display": "none"
      });
      $("#popUp").css({
        "display": "none"
      });
      carousel.selectedItem = carousel.popItem;
      return displayImage(carousel.selectedItem);
    });
    startCarousel = function(interval, selectedItem, numItems) {
      return setInterval((function() {
        selectedItem += 1;
        if (selectedItem === numItems) {
          selectedItem = 0;
        }
        carousel.selectedItem = selectedItem;
        return displayImage(selectedItem);
      }), interval);
    };
    startPopCarousel = function(interval, numItems) {
      return setInterval((function() {
        carousel.popItem += 1;
        if (carousel.popItem === numItems) {
          carousel.popItem = 0;
        }
        return displayPopImage();
      }), interval);
    };
    displayImage = function(selectedItem) {
      $(".selected").removeClass("selected");
      return $("#carousel .item:eq(" + selectedItem + ")").addClass("selected");
    };
    return displayPopImage = function() {
      var docHeight, docWidth, imageHeight, item, popHeight, popWidth;
      $('#carousel .item').removeClass('popImage');
      $("#carousel .item:eq(" + carousel.popItem + ")").addClass('popImage');
      $("#popContent").empty();
      docHeight = document.documentElement.clientHeight;
      docWidth = document.documentElement.clientWidth;
      imageHeight = (docHeight * 0.7) + "px";
      item = $(".popImage :first-child").clone();
      item.css({
        "height": imageHeight,
        "width": "auto"
      });
      popHeight = $("#popUp").height;
      popWidth = $("#popUp").width;
      $("#popContent").append(item);
      $("#popBackground").css({
        "opacity": "0.7",
        "display": "block"
      });
      $("#popBackground").fadeIn("slow");
      $("#popUp").css({
        "display": "block",
        "height": "auto",
        "width": "auto",
        "top": 10,
        "left": 10
      });
      return $("#popUp").fadeIn("slow");
    };
  });

}).call(this);
